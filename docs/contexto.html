<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 2 Contexto | Historias de Crédito y Predicciones de Impuntualidad de Pago</title>
  <meta name="description" content="En este documento se presenta un estudio de caso en el que se aplica ciencia de datos para analizar historias de crédito y generar predicciones de impuntualidad." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 2 Contexto | Historias de Crédito y Predicciones de Impuntualidad de Pago" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="En este documento se presenta un estudio de caso en el que se aplica ciencia de datos para analizar historias de crédito y generar predicciones de impuntualidad." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 2 Contexto | Historias de Crédito y Predicciones de Impuntualidad de Pago" />
  
  <meta name="twitter:description" content="En este documento se presenta un estudio de caso en el que se aplica ciencia de datos para analizar historias de crédito y generar predicciones de impuntualidad." />
  

<meta name="author" content="Michelle Audirac" />


<meta name="date" content="2020-02-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="proyecto.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a></li>
<li class="chapter" data-level="2" data-path="contexto.html"><a href="contexto.html"><i class="fa fa-check"></i><b>2</b> Contexto</a><ul>
<li class="chapter" data-level="2.1" data-path="contexto.html"><a href="contexto.html#la-organización"><i class="fa fa-check"></i><b>2.1</b> La organización</a></li>
<li class="chapter" data-level="2.2" data-path="contexto.html"><a href="contexto.html#problema"><i class="fa fa-check"></i><b>2.2</b> Problema a Resolver</a></li>
<li class="chapter" data-level="2.3" data-path="contexto.html"><a href="contexto.html#propuesta"><i class="fa fa-check"></i><b>2.3</b> Solución Propuesta</a></li>
<li class="chapter" data-level="2.4" data-path="contexto.html"><a href="contexto.html#validacion"><i class="fa fa-check"></i><b>2.4</b> Mecanismo de Validación</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="proyecto.html"><a href="proyecto.html"><i class="fa fa-check"></i><b>3</b> Proyecto</a><ul>
<li class="chapter" data-level="3.1" data-path="proyecto.html"><a href="proyecto.html#historias-de-crédito"><i class="fa fa-check"></i><b>3.1</b> Historias de Crédito</a></li>
<li class="chapter" data-level="3.2" data-path="proyecto.html"><a href="proyecto.html#limpieza"><i class="fa fa-check"></i><b>3.2</b> Limpieza de datos</a></li>
<li class="chapter" data-level="3.3" data-path="proyecto.html"><a href="proyecto.html#feature-engineering"><i class="fa fa-check"></i><b>3.3</b> Feature Engineering</a><ul>
<li class="chapter" data-level="3.3.1" data-path="proyecto.html"><a href="proyecto.html#decaimiento-geométrico-y-promedios-móviles"><i class="fa fa-check"></i><b>3.3.1</b> Decaimiento Geométrico y Promedios Móviles</a></li>
<li class="chapter" data-level="3.3.2" data-path="proyecto.html"><a href="proyecto.html#series-de-diferencias-y-desviación-estándar"><i class="fa fa-check"></i><b>3.3.2</b> Series de Diferencias y Desviación Estándar</a></li>
<li class="chapter" data-level="3.3.3" data-path="proyecto.html"><a href="proyecto.html#etiquetas"><i class="fa fa-check"></i><b>3.3.3</b> Etiquetas</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="proyecto.html"><a href="proyecto.html#selección-de-modelos"><i class="fa fa-check"></i><b>3.4</b> Selección de Modelos</a></li>
<li class="chapter" data-level="3.5" data-path="proyecto.html"><a href="proyecto.html#desempeno"><i class="fa fa-check"></i><b>3.5</b> Desempeño del Modelo</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="conclusiones.html"><a href="conclusiones.html"><i class="fa fa-check"></i><b>4</b> Conclusiones</a></li>
<li class="chapter" data-level="5" data-path="anexo.html"><a href="anexo.html"><i class="fa fa-check"></i><b>5</b> Anexo</a><ul>
<li class="chapter" data-level="5.1" data-path="anexo.html"><a href="anexo.html#decaimiento"><i class="fa fa-check"></i><b>5.1</b> Decaimento Geométrico</a></li>
<li class="chapter" data-level="5.2" data-path="anexo.html"><a href="anexo.html#features"><i class="fa fa-check"></i><b>5.2</b> Lista de Variables</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Historias de Crédito y Predicciones de Impuntualidad de Pago</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="contexto" class="section level1">
<h1><span class="header-section-number">Capítulo 2</span> Contexto</h1>
<div id="la-organización" class="section level2">
<h2><span class="header-section-number">2.1</span> La organización</h2>
<p>La organización en estudio es una SOFOM (Sociedad Financiera de Objeto Múltiple) que realiza otorgamiento de crédito. En México las SOFOMes son una buena opción para aquellos sectores de la población con acceso a financiamiento limitado. Esto es porque la forma en que ofrecen créditos generalmente es más simple, flexible y con menores requisitos que la de las grandes Instituciones financieras. Cabe mencionar que el costo de esta accesibilidad es una tasa de interés más alta.</p>
<p>En este trabajo no revelaremos la razón social de la SOFOM en estudio y de aquí en adelante nos referiremos a esta como el <em>Banco</em>. Tampoco se presentarán los datos globales del Banco: como el tamaño de su cartera de crédito o su número de acreditados. Sin embargo, los fines de este trabajo requieren que se describan las características de los créditos que otorga el Banco y en particular nos interesa explicar la forma en que este clasifica el comportamiento de pago de sus clientes.</p>
<p>Aunque el Banco no otorga créditos de forma directa en sucursal; tampoco se trata de un negocio de e-lending. La forma en que el Banco presta es a través de comisionistas. No nos concentraremos en explicar la relación entre los comisionistas y el Banco ya que, para nuestros fines, la podemos entender simplemente como la relación de un acreedor con un deudor en un contrato de crédito. Por esto, nos referimos a los comisionistas como <em>clientes</em> o <em>acreditados</em>.</p>
<p>Los créditos que el Banco otorga a sus clientes son de tipo <em>revolvente</em>. A diferencia de los créditos tradicionales en los que se presta un valor inicial y se acuerda un plazo y pagos fijos para saldar la deuda, a los créditos revolventes se les atribuye un saldo límite y los clientes pueden disponer del crédito cuando lo requieren.</p>
<p>El Banco guarda la información transaccional de sus clientes y, de acuerdo a una evaluación hecha por un equipo de científicos de datos, cuenta con una <strong>madurez de datos</strong> suficiente para incorporar pipelines de aprendizaje de máquina a sus procesos.</p>
</div>
<div id="problema" class="section level2">
<h2><span class="header-section-number">2.2</span> Problema a Resolver</h2>
<p>El Banco buscó a un equipo de científicos de datos para trabajar en un proyecto que consistiría en la creación de <em>indicadores de riesgo</em> de sus clientes. A continuación explicaremos la motivación detrás de la creación de dichos indicadores. Por confidencialidad, no se dan a conocer valores específicos del negocio.</p>
<p>Previo a iniciar el proyecto, el Banco asegura haber observado una tendencia ascendente en el quebranto de su cartera. Esto significa que hubo un aumento en el número de clientes que dejaban definitivamente de pagar. Por una parte dicho aumento se podía explicar por el crecimiento en la cartera; sin embargo, una idea prevalente en el Banco es que cambios en su estrategia aceleraron la tendencia.</p>
<p>Para conocer los cambios de estrategia que hizo el Banco, primero hay que entender el calendario de pagos que utiliza. Como en cualquier crédito revolvente, cada inicio de <em>corte</em> se determina el <em>monto a pagar</em> de cada cliente y la <em>fecha de pago</em> es la fecha límite en la que los clientes deben cubrir el monto que les corresponde. Un pago lo entendemos como un par de datos dado por (fecha de corte, monto a pagar).</p>
<div class="figure" style="text-align: center"><span id="fig:calendario"></span>
<img src="images/calendario.png" alt="Representación de fechas de corte y fechas de pago" width="70%" />
<p class="caption">
Figure 2.1: Representación de fechas de corte y fechas de pago
</p>
</div>
<p>Las fechas de corte de los créditos del Banco son quincenales y regularmente caen el 8 de cada mes para pagar el 18, y el 23 para pagar el 3 del siguiente mes. Así el calendario de fechas de corte y pago lo podemos representar en una línea de tiempo como en la figura <a href="contexto.html#fig:calendario">2.1</a>.</p>
<p>La <em>cobranza preventiva</em> se refiere a aquellas acciones que se realizan antes de la fecha límite de pago para recordar a los acreditados que realicen sus pagos. La <em>cobranza correctiva</em> son las acciones que se disparan después de la fecha de pago para dar seguimiento a los clientes que no cubrieron su monto correspondiente. Créditos con 90 días vencidos pasan a quebranto.</p>
<p>De acuerdo con el Banco, anteriormente se decidió disminuir los recursos destinados a la cobranza preventiva. Esa estrategia provocó que eventualmente tuvieran que aumentarse los recursos destinados a la cobranza correctiva y que ultimadamente aumentara el quebranto más de lo esperado.</p>
<p>La motivación detrás del proyecto es fortalecer la cobranza preventiva identificando los posibles evento de impago. Además, generar indicadores de riesgo permite crear controles para evitar que clientes en problemas intenten financiar su deuda con más deuda.</p>
</div>
<div id="propuesta" class="section level2">
<h2><span class="header-section-number">2.3</span> Solución Propuesta</h2>
<p>Los clientes pueden cubrir su monto a pagar en una sola exhibición o en varios abonos. La fecha en la que los abonos o movimientos cubren el monto a pagar la llamaremos <em>fecha de abono</em>. Dependiendo del momento en que ocurre la fecha de abono el Banco clasifica los pagos en tres:</p>
<ul>
<li><strong>Pago puntual</strong> si la fecha de abono ocurre antes de la fecha de pago.</li>
<li><strong>Pago impuntual</strong> si la fecha de abono se encuentra después de la fecha de pago.</li>
<li><strong>Pago en rescate</strong> si no se cubrió el monto a pagar antes de la fecha de corte del siguiente período.</li>
</ul>
<p>En la figura <a href="contexto.html#fig:clasificacion">2.2</a> se esquematiza la clasificación de pagos en una línea de tiempo.</p>
<div class="figure" style="text-align: center"><span id="fig:clasificacion"></span>
<img src="images/clasificacion_pagos.png" alt="Clasificación de pagos" width="70%" />
<p class="caption">
Figure 2.2: Clasificación de pagos
</p>
</div>
<p>El equipo de científicos de datos propuso construir un producto de datos que generara dos indicadores de riesgo. El primero, que llamamos el <strong>indicador de impuntualidad</strong> mide, la probabilidad de que un cliente haga pagos impuntuales en los siguientes tres períodos o cortes. El segundo, el <strong>monto en riesgo</strong>, es el indicador de impuntualidad ponderado por el saldo actual del cliente. Al ponderar por saldo, el monto en riesgo permite priorizar a los clientes impuntuales que representan un mayor riesgo para el negocio.</p>
<p>Considerando datos históricos, cálculamos el número de días que se aleja la fecha de abono de la fecha de pago. A esta diferencia la llamamos el <em>momento de pago</em>. Así los momentos de pago menores o iguales a cero representan pagos puntuales y los mayores a cero pagos impuntuales. En la figura <a href="contexto.html#fig:triangulo">2.3</a> tenemos la distribución de los momentos de pago acotados entre -7 y 20. El Banco se refiere a esta distribución como el <em>triángulo de pagos</em>. Como vemos los clientes prefieren pagar un día antes de la fecha de pago, es decir la moda del momento de pago es -1.</p>
<div class="figure" style="text-align: center"><span id="fig:triangulo"></span>
<img src="book_files/figure-html/triangulo-1.png" alt="Triángulo de pagos" width="70%" />
<p class="caption">
Figure 2.3: Triángulo de pagos
</p>
</div>
<p>De acuerdo con los científicos de datos, el indicador de impuntualidad debía ser el encargado de predecir si, en los siguientes tres cortes, el momento de pago de un cliente caería en la cola amarilla y roja del tríangulo de pagos. El Banco aceptó la propuesta.</p>
</div>
<div id="validacion" class="section level2">
<h2><span class="header-section-number">2.4</span> Mecanismo de Validación</h2>
<p>En la sección &lt;ref&gt; se detalla como se construyó la etiqueta de impuntualidad con la que se entrenaron modelos supervisados. Por ahora nos basta saber que se obtuvieron etiquetas para cada cliente y para cada corte en los datos históricos del Banco y con esto se obtuvo que el 90.3% de los casos históricos son negativos y el 9.7% positivos.</p>
<p>Para nuestro problema de clasificación es posible utilizar cualquiera de los siguientes modelos base: la <strong>regla cero</strong> (zero rule, 0R or ZeroR) o el <strong>muestreo aleatorio</strong>. La regla cero consiste en asignar una predicción “cero” en todos los casos.</p>
<p>Calculando las métricas de desempeño teóricas para la regla cero tenemos un <em>accuracy</em> de 90.3%, un <em>recall</em> de 0% y una <em>especificidad</em> de 100%. La <em>matriz de confusión</em> (condicionada al actual) correspondiente es:</p>
<table>
<thead>
<tr class="header">
<th></th>
<th></th>
<th><strong>actual</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td>positivo</td>
<td>negativo</td>
</tr>
<tr class="even">
<td><strong>predicción</strong></td>
<td>positivo</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td></td>
<td>negativo</td>
<td>100%</td>
<td>100%</td>
</tr>
</tbody>
</table>
<p>Para las métricas de desempeño teóricas del muestreo aleatorio tenemos un accuracy de 82.48% (0.903 * 0.903 + 0.097 * 0.097), un recall de 9.7%, una especificidad de 90.3% y la siguiente matriz de confusión (condicionada al actual):</p>
<table>
<thead>
<tr class="header">
<th></th>
<th></th>
<th><strong>actual</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td>positivo</td>
<td>negativo</td>
</tr>
<tr class="even">
<td><strong>predicción</strong></td>
<td>positivo</td>
<td>9.7%</td>
<td>9.7%</td>
</tr>
<tr class="odd">
<td></td>
<td>negativo</td>
<td>90.3%</td>
<td>90.3%</td>
</tr>
</tbody>
</table>
<p>Al contar con estos valores de referencia se estableció que para ponerse en producción el indicador de impuntualidad, este debía alcanzar al menos un nivel de recall de 50% y de especificidad de 93%. El accuracy correspondiente a estos valores de recall y especificidad es de 88.55% (0.93 * 0.9 + 0.097 * 0.5).</p>

<!-- # Literature -->
<!-- Here is a review of existing methods. -->
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="proyecto.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["book.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
